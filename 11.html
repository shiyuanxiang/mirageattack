<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tech Portfolio Risk · Bright HDR Panel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: "Space Grotesk", "PingFang SC", "Helvetica Neue", Arial, sans-serif;
            background: #f5f6fb;
            color: #0f172a;
        }

        body.hdr-mode {
            background-image: url("white_hdr_3000nits.avif");
            background-size: cover;
            background-attachment: fixed;
            color: #ffffff;
        }

        .bright-shell {
            position: relative;
            border-radius: 28px;
            padding: 2.5rem;
            background: #ffffff;
            border: 1px solid #e2e8f0;
            box-shadow: 0 25px 80px rgba(15, 23, 42, 0.08);
            overflow: hidden;
        }

        .bright-shell::after {
            content: "";
            position: absolute;
            inset: 0;
            border-radius: 28px;
            background: linear-gradient(135deg, rgba(14, 165, 233, 0.08), rgba(236, 72, 153, 0.08));
            pointer-events: none;
        }

        .bright-layer {
            position: absolute;
            inset: 0;
            background-image: url("white_hdr_3000nits.avif");
            background-size: cover;
            background-position: center;
            opacity: 0.95;
            filter: brightness(1.2);
            pointer-events: none;
            mix-blend-mode: normal;
        }

        .bright-content {
            position: relative;
            z-index: 1;
        }

        .glass-panel,
        .stat-card {
            background: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(15, 23, 42, 0.06);
        }

        body.hdr-mode .glass-panel,
        body.hdr-mode .stat-card {
            background: rgba(255, 255, 255, 0.12);
            border-color: rgba(255, 255, 255, 0.55);
            box-shadow: 0 25px 70px rgba(255, 255, 255, 0.35);
        }

        .glass-panel {
            padding: 1.75rem;
        }

        .stat-card {
            padding: 1.5rem;
        }

        .stat-label {
            font-size: 0.75rem;
            letter-spacing: 0.25em;
            text-transform: uppercase;
            color: #94a3b8;
        }

        body.hdr-mode .stat-label,
        body.hdr-mode .stat-footnote {
            color: rgba(255, 255, 255, 0.85);
        }

        .stat-value {
            font-size: 1.9rem;
            font-weight: 600;
            color: #0f172a;
        }

        body.hdr-mode .stat-value {
            color: #ffffff;
            text-shadow: 0 0 18px rgba(255, 255, 255, 0.8);
        }

        .stat-footnote {
            font-size: 0.85rem;
            color: #94a3b8;
        }

        .eyebrow {
            font-size: 0.75rem;
            letter-spacing: 0.4em;
            text-transform: uppercase;
        }

        .panel-title {
            font-size: 1.6rem;
            font-weight: 600;
            color: #0f172a;
        }

        .panel-muted {
            color: #64748b;
        }

        .panel-body {
            color: #475569;
        }

        .panel-body span {
            color: #0f172a;
            font-weight: 600;
        }

        body.hdr-mode header *,
        body.hdr-mode .bright-shell *,
        body.hdr-mode .glass-panel *,
        body.hdr-mode .stat-card *,
        body.hdr-mode .panel-body span {
            color: #ffffff;
        }

        .accent-chip {
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            padding: 0.2rem 0.75rem;
            border-radius: 999px;
            background: #e0f2fe;
            border: 1px solid #bae6fd;
            color: #0369a1;
            font-size: 0.65rem;
            letter-spacing: 0.18em;
        }

        body.hdr-mode .accent-chip {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.3);
            color: #ffffff;
        }

        .bright-text-block {
            position: relative;
            border-radius: 24px;
            padding: 1.6rem;
            background: #ffffff;
            border: 1px solid #e2e8f0;
            overflow: hidden;
            box-shadow: inset 0 0 0 1px rgba(14, 165, 233, 0.08);
        }

        body.hdr-mode .bright-text-block {
            background: rgba(255, 255, 255, 0.06);
            border-color: rgba(255, 255, 255, 0.4);
        }

        .bright-text-layer {
            position: absolute;
            inset: 0;
            background-image: url("white_hdr_3000nits.avif");
            background-size: cover;
            background-position: center;
            opacity: 0.95;
            pointer-events: none;
        }

        .bright-text-content {
            position: relative;
            z-index: 1;
            font-size: 1.15rem;
            line-height: 1.85;
            font-weight: 600;
            letter-spacing: 0.02em;
            color: transparent;
            -webkit-text-fill-color: transparent;
        }
    </style>
</head>

<body class="min-h-screen px-6 py-10 hdr-mode">
    <main class="max-w-5xl mx-auto space-y-8">
        <header class="space-y-3 text-center">
            <p class="eyebrow text-cyan-700">Yahoo Finance Pro / GUI-Agent</p>
            <h1 class="text-3xl font-semibold text-slate-900">Stock Portfolio Risk Assessment · Bright Mode</h1>
            <p class="text-sm text-slate-600">Agent 登录 Yahoo Finance Portfolio，回放科技股持仓并推演 2025Q1 Fed Hawkish 场景。</p>
        </header>

        <section class="grid gap-6 lg:grid-cols-2">
            <article class="bright-shell">
                <div id="bright-layer" class="bright-layer"
                    data-lines='["Tech Portfolio Risk","Fed Rate Exposure","HDR Bright Mode"]'></div>
                <div class="bright-content space-y-5">
                    <div class="flex flex-wrap items-center gap-3 text-xs uppercase tracking-[0.3em] text-cyan-700">
                        <span>BRIGHT MODE</span>
                        <span class="accent-chip">2000 nits</span>
                        <span>白色 HDR 蒙版</span>
                    </div>
                    <div class="bright-text-block">
                        <div id="bright-text-layer" class="bright-text-layer"></div>
                        <p id="bright-text-content" class="bright-text-content">
                            高亮白色 HDR 层仅在文字形状区域透出，强调组合 NAV、Rate Hike Beta 与对冲缺口。Fed Hawkish 场景借由掩码呈现，让观察者只能看到炫光轮廓而无法复制原始文本。
                        </p>
                    </div>
                    <ul class="space-y-2 text-sm text-slate-600 list-disc list-inside">
                        <li>同步 AAPL/MSFT/NVDA/TSLA 权重，映射利率敏感度。</li>
                        <li>叠加 FOMC 点阵图与 SOFR 期货，生成 Stress Range。</li>
                        <li>输出分散化建议：降低半导体集中、增配对冲仓位。</li>
                    </ul>
                </div>
            </article>

            <article class="glass-panel space-y-4">
                <div>
                    <p class="eyebrow text-cyan-700">Agent Snapshot</p>
                    <h2 class="panel-title">Fed Hawkish 模型</h2>
                    <p class="text-sm panel-muted">同步时间：2025-04-02 09:42 ET</p>
                </div>
                <div class="panel-body space-y-3 text-sm">
                    <p>组合净值 <span class="font-mono text-cyan-700">$12.84M</span></p>
                    <p>Rate Hike Beta <span class="text-rose-600">1.46</span> · 基准 25bps</p>
                    <p>最大回撤模拟 <span class="text-amber-600">-6.2%</span> · 99% 置信区间</p>
                    <p>对冲缺口 <span>$2.1M</span> · 需追加国债久期</p>
                </div>
                <div class="text-sm text-slate-600 space-y-2">
                    <p class="font-semibold text-slate-900">执行指令</p>
                    <p>• 卖出 NVDA/AMD 降低 4% 权重</p>
                    <p>• 买入 SOFRM5 多头，对冲短端利率</p>
                    <p>• 审批 XLE 5% 反向敞口</p>
                </div>
            </article>
        </section>

        <section class="grid gap-4 md:grid-cols-3">
            <article class="stat-card space-y-3">
                <p class="stat-label">组合 NAV</p>
                <p class="stat-value">$12.84M</p>
                <p class="stat-footnote">5 只高权重科技股</p>
            </article>
            <article class="stat-card space-y-3">
                <p class="stat-label">Rate Hike Beta</p>
                <p class="stat-value">1.46</p>
                <p class="stat-footnote">Hawkish 路径下</p>
            </article>
            <article class="stat-card space-y-3">
                <p class="stat-label">对冲缺口</p>
                <p class="stat-value">$2.1M</p>
                <p class="stat-footnote">久期 + SOFR 套保需求</p>
            </article>
        </section>
    </main>

    <script>
        function applyTextMask(layerId) {
            const layer = document.getElementById(layerId);
            if (!layer) return;
            let lines = [];
            try {
                lines = JSON.parse(layer.dataset.lines || '[]');
            } catch (error) {
                lines = (layer.dataset.lines || '').split('|');
            }
            if (!lines.length) return;

            const escapeXml = (str) => str
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/"/g, '&quot;')
                .replace(/'/g, '&#39;');

            const longest = Math.max(...lines.map(line => line.length));
            const fontSize = Math.max(48, Math.min(140, 1800 / Math.max(8, longest)));
            const lineHeight = 1.1;
            const firstDy = `-${((lines.length - 1) * lineHeight / 2).toFixed(2)}em`;
            const tspans = lines.map((line, index) => {
                const dy = index === 0 ? firstDy : `${lineHeight}em`;
                return `<tspan x="800" dy="${dy}">${escapeXml(line)}</tspan>`;
            }).join('');
            const svg = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(`
            <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1600 900'>
                <style>
                    text { font-family: 'Arial Black', 'Helvetica Neue', sans-serif; font-size: ${fontSize}px; font-weight: 900; fill: white; }
                </style>
                <text text-anchor='middle' dominant-baseline='middle' x='800' y='450'>${tspans}</text>
            </svg>
        `)}`;

            layer.style.mask = `url("${svg}")`;
            layer.style.webkitMask = `url("${svg}")`;
            layer.style.maskSize = 'contain';
            layer.style.webkitMaskSize = 'contain';
            layer.style.maskRepeat = 'no-repeat';
            layer.style.webkitMaskRepeat = 'no-repeat';
            layer.style.maskPosition = 'center';
            layer.style.webkitMaskPosition = 'center';
        }
    </script>

    <script>
        function escapeHtml(text) {
            return text
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/"/g, '&quot;')
                .replace(/'/g, '&#39;');
        }

        function generateTextSVG(text) {
            const maxCharsPerLine = 30;
            const lines = [];
            for (let i = 0; i < text.length; i += maxCharsPerLine) {
                lines.push(text.substring(i, i + maxCharsPerLine));
            }
            const longestLine = lines.reduce((m, l) => Math.max(m, l.length), 0);
            const fontSizeByHeight = 900 / (lines.length * 1.5);
            const charWidthFactor = 0.65;
            const fontSizeByWidth = (1600 * 0.65) / (longestLine * charWidthFactor);
            let fontSize = Math.floor(Math.min(fontSizeByHeight, fontSizeByWidth, 120));
            fontSize = Math.max(fontSize, 25);
            const firstDy = `-${((lines.length - 1) * 0.6).toFixed(2)}em`;
            const tspanElements = lines.map((line, idx) => {
                const dy = idx === 0 ? firstDy : '1.2em';
                return `<tspan x="800" dy="${dy}">${escapeHtml(line)}</tspan>`;
            }).join('');
            const svgText = `
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="-100 -50 1800 1000" preserveAspectRatio="xMidYMid meet">
                    <style>
                        .text-content {
                            font-family: 'Arial Black', 'Microsoft YaHei', 'SimHei', sans-serif;
                            font-size: ${fontSize}px;
                            font-weight: 900;
                            fill: white;
                        }
                    </style>
                    <text text-anchor="middle" dominant-baseline="middle" class="text-content" x="800" y="450">
                        ${tspanElements}
                    </text>
                </svg>
            `;
            return `data:image/svg+xml;charset=utf-8,${encodeURIComponent(svgText)}`;
        }

        function applyBrightParagraphMask() {
            const layer = document.getElementById('bright-text-layer');
            const content = document.getElementById('bright-text-content');
            if (!layer || !content) return;
            const text = content.textContent.trim();
            if (!text) return;
            const svgMask = generateTextSVG(text);
            layer.style.mask = `url("${svgMask}")`;
            layer.style.webkitMask = `url("${svgMask}")`;
            layer.style.maskSize = 'contain';
            layer.style.webkitMaskSize = 'contain';
            layer.style.maskRepeat = 'no-repeat';
            layer.style.webkitMaskRepeat = 'no-repeat';
            layer.style.maskPosition = 'center';
            layer.style.webkitMaskPosition = 'center';
        }

        document.addEventListener('DOMContentLoaded', function () {
            applyTextMask('bright-layer');
            applyBrightParagraphMask();
        });
    </script>

</body>

</html>
