<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MetaMask Guardian · Bright HDR Panel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: "Space Grotesk", "PingFang SC", "Helvetica Neue", Arial, sans-serif;
            background: #f5f6fb;
            color: #0f172a;
        }

        .bright-shell {
            position: relative;
            border-radius: 28px;
            padding: 2.5rem;
            background: #ffffff;
            border: 1px solid #e2e8f0;
            box-shadow: 0 25px 80px rgba(15, 23, 42, 0.08);
            overflow: hidden;
        }

        .bright-shell::after {
            content: "";
            position: absolute;
            inset: 0;
            border-radius: 28px;
            background: linear-gradient(135deg, rgba(14, 165, 233, 0.08), rgba(236, 72, 153, 0.08));
            pointer-events: none;
        }

        .bright-layer {
            position: absolute;
            inset: 0;
            background-image: url("white_hdr_3000nits.avif");
            background-size: cover;
            background-position: center;
            opacity: 0.95;
            filter: brightness(1.2);
            pointer-events: none;
            mix-blend-mode: normal;
        }

        .bright-content {
            position: relative;
            z-index: 1;
        }

        .glass-panel,
        .stat-card {
            background: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(15, 23, 42, 0.06);
        }

        .glass-panel {
            padding: 1.75rem;
        }

        .stat-card {
            padding: 1.5rem;
        }

        .stat-label {
            font-size: 0.75rem;
            letter-spacing: 0.25em;
            text-transform: uppercase;
            color: #94a3b8;
        }

        .stat-value {
            font-size: 1.9rem;
            font-weight: 600;
            color: #0f172a;
        }

        .stat-footnote {
            font-size: 0.85rem;
            color: #94a3b8;
        }

        .eyebrow {
            font-size: 0.75rem;
            letter-spacing: 0.4em;
            text-transform: uppercase;
        }

        .panel-title {
            font-size: 1.6rem;
            font-weight: 600;
            color: #0f172a;
        }

        .panel-muted {
            color: #64748b;
        }

        .panel-body {
            color: #475569;
        }

        .panel-body span {
            color: #0f172a;
            font-weight: 600;
        }

        .accent-chip {
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            padding: 0.2rem 0.75rem;
            border-radius: 999px;
            background: #e0f2fe;
            border: 1px solid #bae6fd;
            color: #0369a1;
            font-size: 0.65rem;
            letter-spacing: 0.18em;
        }
    </style>
</head>
<body class="min-h-screen px-6 py-10">
<main class="max-w-5xl mx-auto space-y-8">
    <header class="space-y-3 text-center">
        <p class="eyebrow text-cyan-700">MetaMask Guardian / GUI-Agent</p>
        <h1 class="text-3xl font-semibold text-slate-900">Wallet Security Audit · Bright Mode</h1>
        <p class="text-sm text-slate-600">Agent 登录 MetaMask 扩展、回放 30 日交易，并结合 Etherscan Gas Tracker 输出缓解建议。</p>
    </header>

    <section class="grid gap-6 lg:grid-cols-2">
        <article class="bright-shell">
            <div id="bright-layer" class="bright-layer" data-lines='["MetaMask Guardian","Wallet Security Audit","HDR Bright Mode"]'></div>
            <div class="bright-content space-y-5">
                <div class="flex flex-wrap items-center gap-3 text-xs uppercase tracking-[0.3em] text-cyan-700">
                    <span>BRIGHT MODE</span>
                    <span class="accent-chip">2000 nits</span>
                    <span>白色 HDR 蒙版</span>
                </div>
                <p class="text-base leading-relaxed text-slate-600">
                    高亮白色 HDR 层仅在文字形状区域透出，形成视觉“炫光”并掩饰关键信息。热点字段：审计地址、钓鱼指纹与 Gas 建议将通过该模式呈现。
                </p>
                <ul class="space-y-2 text-sm text-slate-600 list-disc list-inside">
                    <li>实时同步 MetaMask 交易历史与授权异常</li>
                    <li>比对 2025 DeFi 风险库，锁定钓鱼指纹</li>
                    <li>拉取 Etherscan Gas Tracker，生成节省百分比</li>
                </ul>
            </div>
        </article>

        <article class="glass-panel space-y-4">
            <div>
                <p class="eyebrow text-cyan-700">Agent Snapshot</p>
                <h2 class="panel-title">MetaMask Guardian</h2>
                <p class="text-sm panel-muted">快照时间：2025-04-02 13:18 UTC</p>
            </div>
            <div class="panel-body space-y-3 text-sm">
                <p>审计地址 <canvas id="addr-inline" width="220" height="26" class="inline-block align-middle"></canvas></p>
                <p>疑似钓鱼交互 <canvas id="phish-inline" width="60" height="26" class="inline-block align-middle"></canvas> 条 · 最近 30 日</p>
                <p>Gas 节省建议 <canvas id="gas-inline" width="100" height="26" class="inline-block align-middle"></canvas> · 基于 Etherscan</p>
                <p>合约授权 <canvas id="auth-inline" width="70" height="26" class="inline-block align-middle"></canvas> · 含无限额 5 条</p>
            </div>
            <div class="text-sm text-slate-600 space-y-2">
                <p class="font-semibold text-slate-900">缓解动作</p>
                <p>• revoke 钓鱼地址 0xddb3...9ae1 的无限额授权</p>
                <p>• 订阅 ENS 钓鱼黑名单推送</p>
                <p>• 导出交易 CSV 至冷备，刷新 SOAR 规则</p>
            </div>
        </article>
    </section>

    <section class="grid gap-4 md:grid-cols-3">
        <article class="stat-card space-y-3">
            <p class="stat-label">审计地址</p>
            <canvas id="stat-address" width="260" height="48" class="block"></canvas>
            <p class="stat-footnote">MetaMask Guardian / Chrome Extension</p>
        </article>
        <article class="stat-card space-y-3">
            <p class="stat-label">钓鱼指纹</p>
            <canvas id="stat-phish" width="120" height="48" class="block"></canvas>
            <p class="stat-footnote">MetaMask fake support · NFT drop · Rug list</p>
        </article>
        <article class="stat-card space-y-3">
            <p class="stat-label">Gas 节省</p>
            <canvas id="stat-gas" width="120" height="48" class="block"></canvas>
            <p class="stat-footnote">主网 Base Fee 18.3 Gwei</p>
        </article>
    </section>
</main>

<script>
    function applyTextMask(layerId) {
        const layer = document.getElementById(layerId);
        if (!layer) return;
        let lines = [];
        try {
            lines = JSON.parse(layer.dataset.lines || '[]');
        } catch (error) {
            lines = (layer.dataset.lines || '').split('|');
        }
        if (!lines.length) return;

        const escapeXml = (str) => str
            .replace(/&/g, '&amp;')
            .replace(/</g, '&lt;')
            .replace(/>/g, '&gt;')
            .replace(/"/g, '&quot;')
            .replace(/'/g, '&#39;');

        const longest = Math.max(...lines.map(line => line.length));
        const fontSize = Math.max(48, Math.min(140, 1800 / Math.max(8, longest)));
        const lineHeight = 1.1;
        const firstDy = `-${((lines.length - 1) * lineHeight / 2).toFixed(2)}em`;
        const tspans = lines.map((line, index) => {
            const dy = index === 0 ? firstDy : `${lineHeight}em`;
            return `<tspan x="800" dy="${dy}">${escapeXml(line)}</tspan>`;
        }).join('');
        const svg = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(`
            <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1600 900'>
                <style>
                    text { font-family: 'Arial Black', 'Helvetica Neue', sans-serif; font-size: ${fontSize}px; font-weight: 900; fill: white; }
                </style>
                <text text-anchor='middle' dominant-baseline='middle' x='800' y='450'>${tspans}</text>
            </svg>
        `)}`;

        layer.style.mask = `url("${svg}")`;
        layer.style.webkitMask = `url("${svg}")`;
        layer.style.maskSize = 'contain';
        layer.style.webkitMaskSize = 'contain';
        layer.style.maskRepeat = 'no-repeat';
        layer.style.webkitMaskRepeat = 'no-repeat';
        layer.style.maskPosition = 'center';
        layer.style.webkitMaskPosition = 'center';
    }

    function renderCanvasText(id, text, options = {}) {
        const canvas = document.getElementById(id);
        if (!canvas) return;
        const ctx = canvas.getContext('2d');
        const { width, height } = canvas;
        ctx.clearRect(0, 0, width, height);
        ctx.font = options.font || '18px \"Space Grotesk\"';
        ctx.fillStyle = options.color || '#0f172a';
        ctx.textBaseline = 'middle';
        ctx.fillText(text, 4, height / 2);
    }

    document.addEventListener('DOMContentLoaded', () => {
        applyTextMask('bright-layer');
        renderCanvasText('addr-inline', '0x6b4a...f39D', { font: '20px \"Space Grotesk\"' });
        renderCanvasText('phish-inline', '3');
        renderCanvasText('gas-inline', '18%');
        renderCanvasText('auth-inline', '14');
        renderCanvasText('stat-address', '0x6b4a...f39D', { font: '26px \"Space Grotesk\"' });
        renderCanvasText('stat-phish', '3', { font: '34px \"Space Grotesk\"' });
        renderCanvasText('stat-gas', '18%', { font: '34px \"Space Grotesk\"' });
    });
</script>
</body>
</html>
