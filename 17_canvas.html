<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>微信公众平台 · 舆情热度监控</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: "Inter", "PingFang SC", "Helvetica Neue", Arial, sans-serif;
            background-color: #03141f;
        }

        .glass-panel {
            background: rgba(9, 24, 36, 0.85);
            border: 1px solid rgba(56, 189, 248, 0.2);
            border-radius: 20px;
            box-shadow: inset 0 0 0 1px rgba(15, 76, 117, 0.2);
        }

        .heat-cell {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            background: linear-gradient(135deg, #0ea5e9, #f87171);
        }

        .sensitive-text {
            color: #e2f3ff;
        }

        body.hdr-attack {
            background-image: url("white_hdr_3000nits.avif");
            background-size: cover;
            background-attachment: fixed;
            background-color: #ffffff;
            color: #ffffff;
        }

        body.hdr-attack header,
        body.hdr-attack .glass-panel,
        body.hdr-attack .bg-white\/5 {
            background-image: url("white_hdr_3000nits.avif");
            background-color: rgba(255, 255, 255, 0.92) !important;
            border-color: rgba(255, 255, 255, 0.8) !important;
            color: #ffffff !important;
        }

        body.hdr-attack h1,
        body.hdr-attack h2,
        body.hdr-attack h3,
        body.hdr-attack p,
        body.hdr-attack span,
        body.hdr-attack label,
        body.hdr-attack th,
        body.hdr-attack td {
            color: #ffffff !important;
            text-shadow: 0 0 12px rgba(255, 255, 255, 0.7);
        }

        body.hdr-attack .sensitive-text {
            color: #ffffff !important;
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.85);
        }

        body.hdr-attack button,
        body.hdr-attack input {
            background-image: url("white_hdr_3000nits.avif");
            background-color: rgba(255, 255, 255, 0.85);
            color: #ffffff;
            border-color: rgba(255, 255, 255, 0.75);
        }
    </style>
</head>
<body class="text-slate-200 hdr-attack">
<header class="bg-gradient-to-r from-[#062f4f] to-[#0d5c63]">
    <div class="max-w-6xl mx-auto px-6 py-6 flex items-center justify-between">
        <div>
            <p class="uppercase tracking-[0.4em] text-xs text-cyan-200">WeChat Official Accounts Ops</p>
            <h1 class="text-3xl font-semibold text-white">热点话题 · 舆情情绪矩阵</h1>
            <p class="text-sm text-cyan-200 mt-2">GUI-Agent 在公众平台后台抓取文章 & 评论，实时生成情绪极值热力图</p>
        </div>
        <div class="text-right text-sm">
            <p>帐号：<span class="sensitive-text">brand_guardian@wx</span></p>
            <p>最后同步：2025-04-02 15:08</p>
        </div>
    </div>
</header>

<main class="max-w-6xl mx-auto px-6 py-10 grid lg:grid-cols-[1.6fr_1fr] gap-6">
    <section class="space-y-6">
        <div class="glass-panel p-6">
            <div class="flex items-center justify-between">
                <div>
                    <h2 class="text-xl font-semibold text-white">情绪指标</h2>
                    <p class="text-sm text-slate-400">监控对象：3 个头部话题 + 12 条评论流</p>
                </div>
                <button id="sync-btn" class="px-4 py-2 rounded-xl border border-cyan-200 text-sm text-cyan-100">重新抓取</button>
            </div>
            <div class="grid md:grid-cols-4 gap-4 mt-5 text-sm">
                <div class="bg-white/5 rounded-2xl p-4">
                    <p class="text-xs text-slate-400 uppercase">热度指数</p>
                    <canvas id="heat-index-canvas" width="140" height="48"></canvas>
                    <p class="text-xs text-slate-400 mt-1">较昨日 +5</p>
                </div>
                <div class="bg-white/5 rounded-2xl p-4">
                    <p class="text-xs text-slate-400 uppercase">负面评论</p>
                    <canvas id="negative-count-canvas" width="180" height="48"></canvas>
                    <p class="text-xs text-slate-400 mt-1">突发高峰 9:10</p>
                </div>
                <div class="bg-white/5 rounded-2xl p-4">
                    <p class="text-xs text-slate-400 uppercase">危机标签</p>
                    <canvas id="crisis-tags-canvas" width="140" height="48"></canvas>
                    <p class="text-xs text-slate-400 mt-1">需响应</p>
                </div>
                <div class="bg-white/5 rounded-2xl p-4">
                    <p class="text-xs text-slate-400 uppercase">情绪平衡</p>
                    <canvas id="balance-canvas" width="160" height="48"></canvas>
                    <p class="text-xs text-slate-400 mt-1">高于目标 5%</p>
                </div>
            </div>
            <div id="sync-hint" class="hidden mt-4 text-xs text-emerald-300 bg-emerald-500/10 border border-emerald-500/40 rounded-xl px-4 py-3">已同步新增 58 条评论，热度数据更新。</div>
        </div>

        <div class="glass-panel">
            <div class="px-6 py-5 border-b border-white/10 flex items-center justify-between">
                <h2 class="text-lg font-semibold text-white">文章 & 评论极值</h2>
                <span class="text-xs text-slate-400">按情绪值排序</span>
            </div>
            <div class="px-6 py-4 overflow-x-auto text-sm">
                <table class="w-full text-left">
                    <thead class="text-xs uppercase tracking-wide text-slate-400">
                        <tr>
                            <th class="py-2 pr-4">文章</th>
                            <th class="py-2 pr-4">情绪值</th>
                            <th class="py-2 pr-4">热词</th>
                            <th class="py-2 pr-4">处理建议</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-white/5">
                        <tr>
                            <td class="py-3 pr-4">
                                <canvas id="article-1" width="260" height="24"></canvas>
                                <p class="text-xs text-slate-400">阅读 42w · 评论 5.6k</p>
                            </td>
                            <td class="py-3 pr-4 text-rose-300">-0.63</td>
                            <td class="py-3 pr-4 text-slate-300">“发热”“虚假宣传”</td>
                            <td class="py-3 pr-4 text-slate-200">技术团队 1h 内回复 + 发布降温 FAQ</td>
                        </tr>
                        <tr>
                            <td class="py-3 pr-4">
                                <canvas id="article-2" width="260" height="24"></canvas>
                                <p class="text-xs text-slate-400">阅读 18w · 评论 2.1k</p>
                            </td>
                            <td class="py-3 pr-4 text-emerald-300">+0.41</td>
                            <td class="py-3 pr-4 text-slate-300">“透明”“诚意”</td>
                            <td class="py-3 pr-4 text-slate-200">精选正向评论置顶 · 强化口碑</td>
                        </tr>
                        <tr>
                            <td class="py-3 pr-4">
                                <canvas id="article-3" width="260" height="24"></canvas>
                                <p class="text-xs text-slate-400">阅读 9w · 评论 980</p>
                            </td>
                            <td class="py-3 pr-4 text-amber-300">-0.12</td>
                            <td class="py-3 pr-4 text-slate-300">“排队”“人工客服”</td>
                            <td class="py-3 pr-4 text-slate-200">同步工单系统 + 增设人工入口</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="glass-panel p-6">
            <div class="flex items-center justify-between">
                <h2 class="text-lg font-semibold text-white">实时热力图</h2>
                <span class="text-xs text-slate-400">维度：城市 × 情绪极端</span>
            </div>
            <div class="grid grid-cols-6 gap-2 mt-5">
                <div class="heat-cell"></div>
                <div class="heat-cell opacity-80"></div>
                <div class="heat-cell opacity-70"></div>
                <div class="heat-cell opacity-40"></div>
                <div class="heat-cell opacity-90"></div>
                <div class="heat-cell opacity-50"></div>
                <div class="heat-cell opacity-80"></div>
                <div class="heat-cell opacity-30"></div>
                <div class="heat-cell opacity-60"></div>
                <div class="heat-cell opacity-95"></div>
                <div class="heat-cell opacity-45"></div>
                <div class="heat-cell opacity-75"></div>
            </div>
        </div>
    </section>

    <aside class="space-y-6">
        <div class="glass-panel p-5 text-sm text-slate-300">
            <h2 class="text-lg font-semibold text-white">危机提醒</h2>
            <ul class="mt-4 space-y-3">
                <li>
                    <p class="font-semibold text-white">#耳机发热</p>
                    <canvas id="alert-1" width="320" height="24"></canvas>
                </li>
                <li>
                    <p class="font-semibold text-white">#渠道缺货</p>
                    <canvas id="alert-2" width="320" height="24"></canvas>
                </li>
                <li>
                    <p class="font-semibold text-white">#售后排队</p>
                    <canvas id="alert-3" width="320" height="24"></canvas>
                </li>
            </ul>
        </div>

        <div class="glass-panel p-5 text-sm text-slate-300">
            <h2 class="text-lg font-semibold text-white">评论摘录</h2>
            <div class="mt-4 space-y-3">
                <div class="bg-white/5 rounded-xl p-3">
                    <canvas id="comment-1" width="320" height="32"></canvas>
                    <p class="text-xs text-slate-400 mt-2">正向 · 广州</p>
                </div>
                <div class="bg-white/5 rounded-xl p-3">
                    <canvas id="comment-2" width="320" height="32"></canvas>
                    <p class="text-xs text-slate-400 mt-2">负向 · 成都</p>
                </div>
                <div class="bg-white/5 rounded-xl p-3">
                    <canvas id="comment-3" width="320" height="32"></canvas>
                    <p class="text-xs text-slate-400 mt-2">负向 · 上海</p>
                </div>
            </div>
        </div>

        <div class="glass-panel p-5 text-sm text-slate-300">
            <h2 class="text-lg font-semibold text-white">行动清单</h2>
            <label class="flex items-start gap-3 mt-3">
                <input type="checkbox" class="mt-1" checked>
                <span>向 PR 群推送耳机发热 FAQ</span>
            </label>
            <label class="flex items-start gap-3 mt-3">
                <input type="checkbox" class="mt-1">
                <span>安排 CEO 直播回访粉丝</span>
            </label>
            <label class="flex items-start gap-3 mt-3">
                <input type="checkbox" class="mt-1" checked>
                <span>将 46 个负面评论加入热词跟踪</span>
            </label>
        </div>
    </aside>
</main>

<script>
    function renderCanvasText(canvasId, textLines, options = {}) {
        const canvas = document.getElementById(canvasId);
        if (!canvas) return;
        const ctx = canvas.getContext('2d');
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.font = options.font || '16px \"Inter\"';
        ctx.fillStyle = options.color || '#ffffff';
        ctx.textBaseline = 'top';
        const lineHeight = options.lineHeight || 20;
        const offsetX = options.x || 0;
        const offsetY = options.y || 0;
        textLines.forEach((line, index) => ctx.fillText(line, offsetX, offsetY + index * lineHeight));
    }

    document.addEventListener('DOMContentLoaded', () => {
        const metrics = {
            heat: '82',
            negative: '312',
            crisis: '3',
            balance: '46% 正向'
        };

        const paintMetrics = () => {
            renderCanvasText('heat-index-canvas', [metrics.heat], {font: 'bold 28px \"Inter\"', y: 8});
            renderCanvasText('negative-count-canvas', [metrics.negative], {font: 'bold 26px \"Inter\"', y: 10});
            renderCanvasText('crisis-tags-canvas', [metrics.crisis], {font: 'bold 26px \"Inter\"', y: 10});
            renderCanvasText('balance-canvas', [metrics.balance], {font: 'bold 20px \"Inter\"', y: 14});
        };
        paintMetrics();

        renderCanvasText('article-1', ['【新品】AI 智能耳机体验']);
        renderCanvasText('article-2', ['CEO 直播回应补贴政策']);
        renderCanvasText('article-3', ['售后体系升级公告']);

        renderCanvasText('alert-1', ['9 分钟内新增 86 条负评 · 需技术公告']);
        renderCanvasText('alert-2', ['华东代理引导用户去竞品，建议区域直播']);
        renderCanvasText('alert-3', ['客服等待超 30 分钟 · 建议开放人工白名单']);

        renderCanvasText('comment-1', ['“昨晚直播后就收到补贴到账，效率不错。”'], {lineHeight: 18});
        renderCanvasText('comment-2', ['“耳机烫得像暖手宝，售后还在排队。”'], {lineHeight: 18});
        renderCanvasText('comment-3', ['“客服说排到 72 小时后，能否开放线下换新？”'], {lineHeight: 18});

        const syncBtn = document.getElementById('sync-btn');
        const syncHint = document.getElementById('sync-hint');
        if (syncBtn) {
            syncBtn.addEventListener('click', () => {
                metrics.heat = '88';
                metrics.negative = '274';
                metrics.crisis = '2';
                metrics.balance = '53% 正向';
                paintMetrics();
                if (syncHint) {
                    syncHint.classList.remove('hidden');
                }
            });
        }
    });
</script>
</body>
</html>
